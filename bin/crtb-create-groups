#!/usr/bin/env raku
use App::Classroom::Toolbox;

sub MAIN (UInt:D :p(:$primary-size)   where * > 1  = 2,                        #= primary group size; > 1
          UInt:D :s(:$secondary-size) where * > 0  = $primary-size - 1,        #= secondary group size; > 0, might be needed to assign all students to groups
          Str:D :c(:$class-file)?     where *.IO.f = %*ENV<CRTB_CLASS>,        #= file containing students information; --class-file=classes/demo-class-small or 'export CRTB_CLASS=classes/demo-class-small'
          Str:D :g(:$group-folder)?   where *.IO.d = %*ENV<CRTB_GROUP_FOLDER>, #= folder to store created groups as files; --group-folder=groups 'export CRTB_GROUP_FOLDER=groups'
          ) {

    my @groups = create-groups($class-file, $primary-size, $secondary-size);

    print "\n";
    print create-group-view(@groups);
    print "\n";

    save-group(:@groups, :$group-folder, :$class-file, :$primary-size, :$secondary-size)
}
